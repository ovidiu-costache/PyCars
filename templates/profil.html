{% extends 'base.html' %}

{% block content %}
<div class="container" style="max-width: 900px; margin-top: 30px;">
    
    <div style="background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 30px; display: flex; align-items: center; justify-content: space-between;">
        <div>
            <h2 style="margin: 0; color: #2c3e50;">Salut, {{ user.name }}!</h2>
            <p style="margin: 5px 0 0; color: grey;">{{ user.email }}</p>
        </div>
        <div>
            <!-- ma duce pe pagina de adaugare de anunturi -->
            <a href="/adauga" class="btn-post" style="text-decoration: none; padding: 10px 20px; border-radius: 5px; background: #3498db; color: white;">
                + Adaugă Anunț Nou
            </a>
        </div>
    </div>

    <h3 style="border-bottom: 2px solid #ddd; padding-bottom: 10px; margin-bottom: 20px;">Anunțurile Tale ({{ anunturi|length }})</h3>

    <!-- daca am anunturi pe cont le afisez cu poza si cateva detalii -->
    {% if anunturi %}
        <div style="display: flex; flex-direction: column; gap: 20px;">
            {% for anunt in anunturi %}
                <div style="background: white; border: 1px solid #ddd; border-radius: 8px; overflow: hidden; display: flex; padding: 15px; align-items: center;">
                    
                    <div style="width: 150px; height: 100px; background: #eee; border-radius: 5px; overflow: hidden; margin-right: 20px; flex-shrink: 0;">
                        {% if anunt.image_list %}
                            <img src="{{ url_for('static', filename='uploads/' + anunt.image_list) }}" style="width: 100%; height: 100%; object-fit: cover;">
                        {% else %}
                            <img src="https://images.unsplash.com/photo-1533473359331-0135ef1b58bf?auto=format&fit=crop&w=300&q=80" style="width: 100%; height: 100%; object-fit: cover; opacity: 0.6;">
                        {% endif %}
                    </div>

                    <!-- un teaser la anunt -->
                    <div style="flex-grow: 1;">
                        <h4 style="margin: 0 0 5px;">
                            {{ anunt.title }} 
                            <span style="font-size: 0.8em; color: grey; font-weight: normal;">({{ anunt.year }})</span>
                        </h4>
                        <p style="margin: 0; color: #27ae60; font-weight: bold; font-size: 1.1em;">{{ anunt.price }} €</p>
                        <p style="margin: 5px 0 0; font-size: 0.9em; color: #7f8c8d;">
                            {{ anunt.mileage }} km • {{ anunt.engine.model.name }}
                        </p>
                    </div>

                    <!-- aici vad detaliile anuntului sau il sterg daca nu mai e valabil -->
                    <div style="display: flex; gap: 10px;">
                        <a href="anunt/{{ anunt.id }}" style="padding: 8px 15px; background: #f1f2f6; color: #2c3e50; text-decoration: none; border-radius: 4px; font-size: 14px;">Vezi</a>
                        
                        <a href="sterge/{{ anunt.id }}" onclick="return confirm('Sigur vrei să ștergi acest anunț?')" style="padding: 8px 15px; background: #ffcccc; color: #c0392b; text-decoration: none; border-radius: 4px; font-size: 14px;">Șterge</a>
                    </div>

                </div>
            {% endfor %}
        </div>
        <!-- daca nu am anunturi postate -->
    {% else %}
        <div style="text-align: center; padding: 50px; background: white; border-radius: 10px;">
            <p style="font-size: 18px; color: grey;">Nu ai publicat niciun anunț momentan.</p>
            <a href="/adauga" style="color: #3498db; font-weight: bold;">Fii primul care vinde ceva!</a>
        </div>
    {% endif %}

</div>
{% endblock %}